<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yield 2 Sell</title>
  <link rel="icon" href="/imgs/Yield2SellIcon.ico" type="image/x-icon" />

  <link rel="stylesheet" href="css/nav-tabs.css" />
  <link rel="stylesheet" href="css/yield-2-sell-styles/yield-rock-composition-modal.css" />
  <link rel="stylesheet" href="css/yield-2-sell-styles/yield-buttons.css" />
  <link rel="stylesheet" href="css/yield-2-sell-styles/yield-total-displays.css" />
  <link rel="stylesheet" href="css/yield-2-sell-styles/yield-table.css" />
  <link rel="stylesheet" href="css/yield-2-sell-styles/yield-layout.css" />

  <!-- Load item data and color mappings -->
  <script src="Yield2SellItemPrices.js"></script>
  <script src="itemColors.js"></script>
  <script src="JumpData.js"></script>
</head>
<body>

  <!-- Navigation -->
  <div class="nav-tabs">
    <a href="index.html">Space Trucker Tools</a>
    <a href="CargoManifestWriter.html">Cargo Manifest Writer</a>
    <a href="WorkordersOverview.html">Work Orders Overview</a>
    <a href="ProfitSplitter.html">Profit Splitter</a>
    <a href="Yield2Sell.html">Yield 2 Sell</a>
    <a href="Scavenger.html">Scavenger</a>
    <a href="AaronsJumpData.html">Aaron's Jump Data</a>
    <a href="Profile.html">Profile</a>
  </div>

  <div class="container">
    <main>
      <h1>Yield 2 Sell</h1>

      <!-- Refinery Info -->
      <label for="refineryTitle" style="display:block; text-align:center; color: gold; margin-bottom: 0.5rem;">
        Refinery Name:
      </label>
      <input type="text" id="refineryTitle" placeholder="Enter refinery name"
             style="display:block; margin: 0 auto 1rem auto; width: 300px; padding: 0.3rem; font-size: 1rem;
                    border-radius: 4px; border: 1px solid #555; background-color: #111; color: white;" />

      <div style="text-align:center; margin-bottom:1rem; color: gold;">
        <label for="refiningType">Refining Type: </label>
        <select id="refiningType" style="background:#111; border:1px solid #555; color:white; padding:0.3rem;
                                         border-radius:4px; width:150px;">
          <option value="Ferron">Ferron</option>
          <option value="Dynix">Dynix</option>
        </select>

        <label for="refiningCost" style="margin-left:1rem;">Refining Cost: </label>
        <input type="number" id="refiningCost" placeholder="aUEC" min="0"
               style="width:100px; background:#111; border:1px solid #555; color:white; padding:0.3rem; border-radius:4px;" />

        <label for="refiningHours" style="margin-left:1rem;">Duration: </label>
        <input type="number" id="refiningHours" placeholder="Hours" min="0" max="23"
               style="width:60px; background:#111; border:1px solid #555; color:white; padding:0.3rem; border-radius:4px;" />
        <input type="number" id="refiningMinutes" placeholder="Minutes" min="0" max="59"
               style="width:60px; background:#111; border:1px solid #555; color:white; padding:0.3rem; border-radius:4px;" />

        <div style="margin-top:0.5rem; font-weight:bold;">
          Order Ready At: <span id="orderReadyAt" style="color: lightgreen;">--:--</span>
        </div>
      </div>

      <!-- Price Table -->
      <table id="priceTable">
        <thead>
          <tr>
            <th>Item</th>
            <th>Yield</th>
            <th>Location</th>
            <th>Price Per SCU (aUEC)</th>
            <th>Item Total</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div class="total-display" id="grandTotal">Total: 0 aUEC</div>

      <!-- Export Buttons -->
      <div style="margin-top:1rem; text-align: center; gap: 1rem; display: flex; justify-content: center;">
        <button id="exportTxtBtn">Export TXT</button>
        <button id="exportCsvBtn">Export CSV</button>
        <button id="copyClipboardBtn">Copy to Clipboard</button>
      </div>

      <!-- Modal Triggers -->
      <button onclick="openJumpDataModal()">Open Jump Data</button>
      <button id="openRockModal" onclick="openRockModal()">Open Rock Composition</button>

      <!-- Rock Composition Modal -->
      <div id="rockModal" class="modal">
        <div class="modal-content">
          <div class="initial-container">
            <div class="modal-title-and-button">
              <span class="close" onclick="closeRockModal()">&times;</span>
              <h2 style="display:inline-block; margin-right:1rem;">Rock Composition</h2>
              <button onclick="saveCompositionTable()">Save Composition</button>
            </div>

            <label>Rock Size (SCU): 
              <input type="number" id="rockSize" placeholder="SCU" oninput="updateRockTable()">
            </label>

            <label>Inert Material Filtering (%):
              <input type="number" id="inertFilter" value="%" min="0" max="100" oninput="updateRockTable()">
            </label>

            <div id="materialsWrapper"
                 style="border:1px solid #555; padding:0.5rem; margin:0.5rem 0; border-radius:5px; background:#1a1a1a;">
              <div id="materialsContainer"></div>
              <button onclick="addMaterial()">Add Material</button>
            </div>
          </div>

          <table id="compositionTable">
            <thead>
              <tr>
                <th>Material</th>
                <th>Percentage (%)</th>
                <th>SCU</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <div id="savedTables"></div>
        </div>
      </div>

      <!-- Jump Data Modal -->
      <div id="jumpDataModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <div class="container">
            <h1>Quantum Jump Data for Aaron's Halo</h1>
            <table id="jumpTable">
              <thead>
                <tr>
                  <th>From</th>
                  <th>To</th>
                  <th>Drop-Out Range (millions of km)</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div id="exportBox">
              <button onclick="exportJumpDataToTXT()">Export TXT</button>
              <button onclick="exportJumpDataToCSV()">Export CSV</button>
              <button onclick="copyJumpDataToClipboard()">Copy to Clipboard</button>
            </div>
          </div>
        </div>
      </div>
      <!-- END Jump Data Modal -->

    </main>
  </div>

  <!-- Scripts -->
  <script>
    // (JavaScript content left indented, already cleaned in your last paste)
    // ...
  </script>
</body>
</html>