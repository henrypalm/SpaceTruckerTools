<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Work Order Overview</title>
<style>
  body {
    background-color: #111;
    color: white;
    font-family: Arial, sans-serif;
    padding: 2rem;
  }
  h1 {
    color: gold;
  }
  h2 {
    color: lightblue;
  }
  .container {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
  }
  .list {
    flex: 1;
    background-color: #222;
    border: 1px solid #555;
    border-radius: 8px;
    padding: 1rem;
    overflow-y: auto;
    max-height: 300px;
  }
  .work-order {
    border-bottom: 1px solid #444;
    padding: 0.5rem 0;
  }
  .work-order:last-child {
    border-bottom: none;
  }
  button {
    padding: 0.3rem 0.6rem;
    font-size: 0.9rem;
    border-radius: 5px;
    border: 1px solid #555;
    background-color: #333;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background-color: #555;
  }
  .bottom-list {
    background-color: #222;
    border: 1px solid #555;
    border-radius: 8px;
    padding: 1rem;
    max-height: 200px;
    overflow-y: auto;
  }
</style>
</head>
<body>

<h1>Work Order Overview</h1>

<div class="container">
  <div class="list" id="availableList">
    <h2>Available Work Orders</h2>
    <!-- Work orders populated here -->
  </div>

  <div class="list" id="activeList">
    <h2>Active Work Orders</h2>
    <!-- Active work orders populated here -->
  </div>
</div>

<div class="bottom-list" id="completedList">
  <h2>Completed Work Orders</h2>
  <!-- Completed work orders populated here -->
</div>

<script>
  // Example stored manifests in localStorage
  // localStorage.setItem("cargoManifestData", JSON.stringify({
  //   "2025-08-01_Job1": { title: "Job 1", dateSaved: Date.now(), grandTotal: 10000 },
  //   "2025-08-02_Job2": { title: "Job 2", dateSaved: Date.now(), grandTotal: 15000 }
  // }));

  const availableList = document.getElementById("availableList");
  const activeList = document.getElementById("activeList");
  const completedList = document.getElementById("completedList");

  let availableOrders = [];
  let activeOrders = [];
  let completedOrders = [];

  function loadOrders() {
    const savedManifests = JSON.parse(localStorage.getItem("cargoManifestData")) || {};
    availableOrders = Object.keys(savedManifests).map(key => ({
      key,
      ...savedManifests[key]
    }));
    renderLists();
  }

  function renderLists() {
    // Available Orders
    availableList.innerHTML = "<h2>Available Work Orders</h2>";
    if (availableOrders.length === 0) {
      availableList.innerHTML += "<p>No available work orders</p>";
    } else {
      availableOrders.forEach(order => {
        const div = document.createElement("div");
        div.className = "work-order";
        div.innerHTML = `
          <strong>${order.title}</strong><br>
          Saved: ${new Date(order.dateSaved).toLocaleString()}<br>
          Total: ${order.grandTotal.toLocaleString()} aUEC<br>
          <button onclick="activateOrder('${order.key}')">Activate</button>
        `;
        availableList.appendChild(div);
      });
    }

    // Active Orders
    activeList.innerHTML = "<h2>Active Work Orders</h2>";
    if (activeOrders.length === 0) {
      activeList.innerHTML += "<p>No active work orders</p>";
    } else {
      activeOrders.forEach(order => {
        const div = document.createElement("div");
        div.className = "work-order";
        div.innerHTML = `
          <strong>${order.title}</strong><br>
          Total: ${order.grandTotal.toLocaleString()} aUEC<br>
          <button onclick="completeOrder('${order.key}')">Complete</button>
        `;
        activeList.appendChild(div);
      });
    }

    // Completed Orders
    completedList.innerHTML = "<h2>Completed Work Orders</h2>";
    if (completedOrders.length === 0) {
      completedList.innerHTML += "<p>No completed work orders</p>";
    } else {
      completedOrders.forEach(order => {
        const div = document.createElement("div");
        div.className = "work-order";
        div.innerHTML = `
          <strong>${order.title}</strong> â€” ${order.grandTotal.toLocaleString()} aUEC
        `;
        completedList.appendChild(div);
      });
    }
  }

  function activateOrder(key) {
    const index = availableOrders.findIndex(o => o.key === key);
    if (index > -1) {
      activeOrders.push(availableOrders.splice(index, 1)[0]);
      renderLists();
    }
  }

  function completeOrder(key) {
    const index = activeOrders.findIndex(o => o.key === key);
    if (index > -1) {
      completedOrders.push(activeOrders.splice(index, 1)[0]);
      renderLists();
    }
  }

  loadOrders();
</script>

</body>
</html>